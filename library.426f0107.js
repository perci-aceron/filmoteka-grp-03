function e(e,t,n,a){Object.defineProperty(e,t,{get:n,set:a,enumerable:!0,configurable:!0})}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},t.parcelRequired7c6=r),r.register("kyEFX",(function(t,n){var a,r;e(t.exports,"register",(function(){return a}),(function(e){return a=e})),e(t.exports,"resolve",(function(){return r}),(function(e){return r=e}));var o={};a=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)o[t[n]]=e[t[n]]},r=function(e){var t=o[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),r.register("7rYDH",(function(t,n){e(t.exports,"fetchPopularMovies",(function(){return r})),e(t.exports,"fetchMoviesByQuery",(function(){return o})),e(t.exports,"fetchGenres",(function(){return s}));const a="9ce408291b177c2a2e598968d33c0b4a";async function r(e){const t=new URL("https://api.themoviedb.org/3/trending/movie/week");t.searchParams.append("api_key",a),t.searchParams.append("page",e);const n=await fetch(t);return await n.json()}async function o(e,t){const n=new URL("https://api.themoviedb.org/3/search/movie");n.searchParams.append("api_key",a),n.searchParams.append("query",e),n.searchParams.append("page",t);const r=await fetch(n);return await r.json()}async function s(){const e=new URL("https://api.themoviedb.org/3/genre/movie/list");e.searchParams.append("api_key",a);const t=await fetch(e);return(await t.json()).genres}})),r.register("gjiCh",(function(e,t){const n=document.querySelector(".mask");window.addEventListener("load",(()=>{n.classList.add("hide")}))})),r.register("4NPRg",(function(t,n){e(t.exports,"updateLibRender",(function(){return l})),e(t.exports,"localPaginate",(function(){return d})),e(t.exports,"loadFromStorageWatched",(function(){return u})),e(t.exports,"onClickWatched",(function(){return g}));var a=r("lV0gX"),o=r("b5rV1"),s=r("2nhTy"),i=r("52C1o"),c=r("lJEtM");const l=async e=>{try{let t="";const n='<li class="watched-img"><p class="watched-warning">No movies added yet.</p></li>';(0,s.resetCurrentPage)();const r=d(e,c.state.currentPage);void 0===e||0===e.length?((0,s.clearPagination)(),t=n):(t=await(0,a.renderGallery)(r),(0,s.clearPagination)(),(0,s.renderPaginationMarkup)()),i.moviesEl.innerHTML="",i.moviesEl.insertAdjacentHTML("beforeend",t)}catch(e){console.error(e.message)}},d=(e,t)=>{if(!e)return;const n=6*(t-1);return c.state.totalPages=Math.ceil(e.length/6),e.slice(n,n+6)},u=()=>{const e=(0,o.getFromStorage)(o.localStorageKeys.WATCHED);c.state.whatPaginated="local",c.state.whatchedOrQueue="WATCHED",l(e)},g=async e=>{if("BUTTON"!==e.target.nodeName)return;if(e.target.classList.contains("active"))return;const t=document.querySelector(".active");let n=e.target.dataset.value.toUpperCase();c.state.whatchedOrQueue=n;const a=(0,o.getFromStorage)(o.localStorageKeys[n]);l(a),t.classList.remove("active"),e.target.classList.add("active")}})),r.register("lV0gX",(function(t,n){e(t.exports,"renderGallery",(function(){return o}));var a=r("7rYDH");async function o(e){const t=await(0,a.fetchGenres)();return e.map((({id:n,poster_path:a,title:r,release_date:o,genre_ids:s,original_title:i,vote_average:c,popularity:l,vote_count:d,overview:u}=e)=>{const g=a?`https://image.tmdb.org/t/p/w500${a}`:"https://i.ibb.co/r76r6Vt/oie-30214851-Ms-Wl-PTS0.png",m=o?o.split("-")[0]:"Unknown",p=s?function(e,t){const n=[];for(const a of t){if("N/A"===e||0===e.length){n.push("Other");break}e.includes(a.id)&&n.push(a.name)}return n.length>2&&n.splice(2,n.length-2,"Other"),n.join(", ")}(s,t):"Unknown";return`\n      <li class='movie_list_item' data-id="${n}" >\n      <div href="" class='movie_list_link link' id=${n}>\n      <div class="movie__cover--darkened"\n        data-id="${n}"\n        data-poster_path="${a}"\n        data-title="${r}"\n        data-genre_ids="${p}"\n        data-original_title="${i}"\n        data-vote_average="${c}"\n        data-popularity="${l}"\n        data-vote_count="${d}"\n        data-overview="${u}"\n        data-release_date="${o}"\n      ></div>\n        <img class="movie_list_image" src=${g} alt='Poster ${i}' loading='lazy' />\n        <div class='movie-info'>\n            <p class='movie-title'>\n              <b>${r.toUpperCase()}</b>\n            </p>\n            <p class='movie-date'>\n              <span>${p} | ${m}</span>\n            </p>\n            \n        </div>\n        </div>\n      </li>\n      `})).join("")}})),r.register("b5rV1",(function(t,n){e(t.exports,"setToLocalStorage",(function(){return a})),e(t.exports,"getFromStorage",(function(){return r})),e(t.exports,"localStorageKeys",(function(){return o}));const a=(e,t)=>{try{localStorage.setItem(e,JSON.stringify(t))}catch(e){console.log(e.messege)}},r=e=>{try{const t=localStorage.getItem(e);return null===t?void 0:JSON.parse(t)}catch(e){console.log(e.messege)}},o={WATCHED:"watched",QUEUE:"queue"}})),r.register("2nhTy",(function(t,n){e(t.exports,"resetCurrentPage",(function(){return g})),e(t.exports,"clearPagination",(function(){return m})),e(t.exports,"renderPaginationMarkup",(function(){return f})),e(t.exports,"onBtnPageClick",(function(){return y}));var a=r("7rYDH"),o=r("lV0gX"),s=r("b5rV1"),i=r("krGWQ"),c=r("4NPRg"),l=r("52C1o"),d=r("lJEtM");const{pagination:u}=i.refs,g=()=>{d.state.currentPage=1},m=()=>{u.innerHTML=""},p=(e,t)=>{const n=Math.ceil(e/5),a=Math.ceil(t/5),r=5*(a-1)+1,o=Math.min(r+5-1,e);return{pages:Array.from({length:o-r+1},((e,t)=>r+t)),hasPrevGroup:a>1,hasNextGroup:a<n}},f=()=>{u.insertAdjacentHTML("beforeend",(()=>{if(d.state.totalPages<=1)return;const{pages:e,hasPrevGroup:t,hasNextGroup:n}=p(d.state.totalPages,d.state.currentPage),a=`<button type="button" class="end-btn page-btn">${d.state.totalPages}</button>`,r=`<button type="button" class="prev-btn page-btn"><svg class="icon icon-arrow-left">\n    <use xlink:href="${d.state.sprite}#icon-arrow-left"></use>\n  </svg></button>`,o=`<button type="button" class="next-btn page-btn"><svg class="icon icon-arrow-right">\n    <use xlink:href="${d.state.sprite}#icon-arrow-right"></use>\n  </svg></button>`;return(t?r+'<button type="button" class="start-btn page-btn">1</button><button class="page-btn prev-dots">...</button>':"")+e.map((e=>`<button type="button" class="page-btn ${e===d.state.currentPage?"active-page":""}\n        ">${e}</button>`)).join("")+(n?'<button class="page-btn next-dots">...</button>'+a+o:"")})())},v=e=>{d.state.currentPage=e,m(),f()},y=async e=>{"BUTTON"===e.target.nodeName&&Number(e.target.textContent)!==d.state.currentPage&&(e.target.classList.contains("next-btn")&&v(d.state.currentPage+1),e.target.classList.contains("prev-btn")&&v(d.state.currentPage-1),e.target.classList.contains("next-dots")&&(()=>{const{pages:e}=p(d.state.totalPages,d.state.currentPage),t=e[e.length-1],n=Math.min(t+1,d.state.totalPages);d.state.currentPage=e[e.length-1]+1,v(n)})(),e.target.classList.contains("prev-dots")&&(()=>{const{pages:e}=p(d.state.totalPages,d.state.currentPage),t=e[0],n=Math.max(t-1,1);v(n)})(),(e=>{const t=document.querySelector(".active-page"),n=Number(e.target.textContent)||d.state.currentPage;n!==d.state.currentPage&&(v(n),t.classList.remove("active-page"),e.target.classList.add("active-page"))})(e),window.scrollTo({top:0}),l.moviesEl.innerHTML="",(async e=>{let t;switch(e){case"main":try{const{results:e}=await(0,a.fetchPopularMovies)(d.state.currentPage);t=await(0,o.renderGallery)(e),l.moviesEl.insertAdjacentHTML("beforeend",t)}catch(e){console.error(e.message)}break;case"search":try{const{results:e}=await(0,a.fetchMoviesByQuery)(d.state.query,d.state.currentPage);t=await(0,o.renderGallery)(e),l.moviesEl.insertAdjacentHTML("beforeend",t)}catch(e){console.error(e.message)}break;case"local":try{const e="WATCHED"===d.state.whatchedOrQueue?(0,s.getFromStorage)(s.localStorageKeys.WATCHED)||[]:(0,s.getFromStorage)(s.localStorageKeys.QUEUE)||[];t=await(0,o.renderGallery)((0,c.localPaginate)(e,d.state.currentPage))}catch(e){console.error(e.message)}break;default:throw new Error(`Invalid 'where' parameter: ${e}`)}l.moviesEl.insertAdjacentHTML("beforeend",t)})(d.state.whatPaginated))}})),r.register("krGWQ",(function(t,n){e(t.exports,"refs",(function(){return a}));const a={foterLink:document.querySelector(".footer__link"),form:document.querySelector(".header-search-form"),pagination:document.querySelector(".pagination"),btnWrapper:document.querySelector("#buttonWrapper"),addToWatchedBtn:document.querySelector(".add-to-watched-btn"),addToQueueBtn:document.querySelector(".add-to-queue-btn"),moviesLib:document.querySelector(".movies-lib"),watchedQueueBtnBlock:document.querySelector(".buttons-block"),buttonWatched:document.querySelector(".button-watched"),buttonQueue:document.querySelector(".button-queue")}})),r.register("52C1o",(function(t,n){e(t.exports,"moviesEl",(function(){return c}));var a=r("7rYDH"),o=r("lV0gX"),s=r("2nhTy"),i=r("lJEtM");const c=document.querySelector(".movies");window.addEventListener("load",(()=>{(0,s.resetCurrentPage)(),(0,a.fetchPopularMovies)(i.state.currentPage).then((e=>{if("local"===i.state.whatPaginated)return;i.state.whatPaginated="main";const{results:t,total_pages:n}=e;return i.state.totalPages=n,(0,s.renderPaginationMarkup)(),(0,o.renderGallery)(t)})).then((e=>{c?.insertAdjacentHTML("beforeend",e)}))}))})),r.register("lJEtM",(function(t,n){e(t.exports,"state",(function(){return a}));const a={currentPage:1,totalPages:0,activeFilm:null,query:null,whatPaginated:null,whatchedOrQueue:null,sprite:new URL(r("e5EMj"))}})),r.register("e5EMj",(function(e,t){e.exports=new URL(r("kyEFX").resolve("lp5u4"),import.meta.url).toString()})),r.register("a9okJ",(function(e,t){const n={openModal:document.querySelector(".open-modal-team"),closeModal:document.querySelector(".close-modal-team"),teamBackdrop:document.querySelector(".backdrop-modal"),teamModal:document.getElementsByClassName("team__modal")};function a(e){n.teamModal[0].classList.remove("closeModalAnimationTeam"),n.teamBackdrop.classList.add("team__backdrop--hidden"),document.removeEventListener("keydown",r),document.body.style.overflow=""}function r(e){"Escape"===e.code&&(n.teamModal[0].classList.remove("openModalAnimationTeam"),n.teamModal[0].classList.add("closeModalAnimationTeam"),setTimeout((()=>{a()}),400),a())}function o(e){e.target===n.teamBackdrop&&(n.teamModal[0].classList.remove("openModalAnimationTeam"),n.teamModal[0].classList.add("closeModalAnimationTeam"),setTimeout((()=>{a()}),400))}n.openModal.addEventListener("click",(function(e){n.teamBackdrop.classList.remove("team__backdrop--hidden"),document.addEventListener("keydown",r),document.addEventListener("click",o),n.teamModal[0].classList.add("openModalAnimationTeam")})),n.closeModal.addEventListener("click",a)})),r.register("b9l6T",(function(e,t){r("gAKaR"),r("7rYDH");var n=r("62bmB"),a=r("b5rV1"),o=r("krGWQ"),s=r("lJEtM");const i=document.getElementById("info-modal"),c=document.getElementById("modal"),l=()=>{c.classList.remove("openModalAnimation"),c.classList.add("closeModalAnimation"),setTimeout((()=>{i.classList.remove("open"),localStorage.removeItem("modalCardData")}),600)};window.addEventListener("keydown",(e=>{"Escape"===e.key&&l()}));const d=document.getElementById("close-modal");d.addEventListener("click",(e=>{e.target==d&&l()})),window.onclick=e=>{let t=document.getElementById("info-modal");e.target==t&&l()},window.onload=()=>{const e=document.getElementsByClassName("movies")[0],t=document.getElementsByClassName("movies-lib")[0];e?.addEventListener("click",(e=>{n(e)})),t?.addEventListener("click",(e=>{n(e)}));const n=e=>{const t={...e.target.dataset};if(!Object.keys(t).length)return;s.state.activeFilm=t,localStorage.setItem("modalCardData",JSON.stringify(t)),u();const n=(0,a.getFromStorage)(a.localStorageKeys.WATCHED)||[],r=(0,a.getFromStorage)(a.localStorageKeys.QUEUE)||[];n.find((e=>e.id===s.state.activeFilm.id))?o.refs.addToWatchedBtn.innerText="REMOVE FROM WATCHED":o.refs.addToWatchedBtn.innerText="ADD TO WATCHED",r.find((e=>e.id===s.state.activeFilm.id))?o.refs.addToQueueBtn.innerText="REMOVE FROM QUEUE":o.refs.addToQueueBtn.innerText="ADD TO QUEUE"}};const u=()=>{document.getElementById("info-modal").classList.add("open"),c.classList.add("openModalAnimation"),n.getInitialModalData()}})),r.register("gAKaR",(function(t,n){e(t.exports,"onBtnAddToLibrary",(function(){return l})),e(t.exports,"updateMarkupLibrary",(function(){return g}));var a=r("b5rV1"),o=r("2nhTy"),s=r("krGWQ"),i=r("4NPRg"),c=r("lJEtM");const l=e=>{const t=(0,a.getFromStorage)(a.localStorageKeys.WATCHED)||[],n=(0,a.getFromStorage)(a.localStorageKeys.QUEUE)||[];"ADD TO WATCHED"===e.target.innerText?d(t,a.localStorageKeys.WATCHED,"WATCHED",e):"REMOVE FROM WATCHED"===e.target.innerText?u(t,a.localStorageKeys.WATCHED,"WATCHED",e):"ADD TO QUEUE"===e.target.innerText?d(n,a.localStorageKeys.QUEUE,"QUEUE",e):"REMOVE FROM QUEUE"===e.target.innerText&&u(n,a.localStorageKeys.QUEUE,"QUEUE",e)};function d(e,t,n,r){e.push(c.state.activeFilm),(0,a.setToLocalStorage)(t,e),r.target.innerText=`REMOVE FROM ${n}`}function u(e,t,n,r){const o=e.filter((e=>e.id!==c.state.activeFilm.id));(0,a.setToLocalStorage)(t,o),r.target.innerText=`ADD TO ${n}`}function g(e){"ADD TO WATCHED"===e.target.innerText||"REMOVE FROM WATCHED"===e.target.innerText?m():("ADD TO QUEUE"===e.target.innerText||"REMOVE FROM QUEUE"===e.target.innerText)&&p()}async function m(){(0,o.resetCurrentPage)();const e=(0,a.getFromStorage)(a.localStorageKeys.WATCHED)||[],t=(0,i.localPaginate)(e,c.state.currentPage);(0,i.updateLibRender)(t),f(s.refs.buttonWatched,s.refs.buttonQueue)}async function p(){(0,o.resetCurrentPage)();const e=(0,a.getFromStorage)(a.localStorageKeys.QUEUE)||[],t=(0,i.localPaginate)(e,c.state.currentPage);(0,i.updateLibRender)(t),f(s.refs.buttonQueue,s.refs.buttonWatched)}function f(e,t){e.classList.add("active"),t.classList.remove("active")}})),r.register("62bmB",(function(t,n){let a;e(t.exports,"getInitialModalData",(function(){return s}));const r=document.createElement("span"),o=document.createElement("span"),s=()=>{const e=JSON.parse(localStorage.getItem("modalCardData")),t=document.getElementById("film-img"),n=document.getElementById("film-title"),s=document.getElementById("votes"),i=document.getElementById("popul"),c=document.getElementById("origTitle"),l=document.getElementById("genre");a=e.id,t.src="null"!==e.poster_path?t.style.backgroundImage=`url('https://image.tmdb.org/t/p/w500${e.poster_path}')`:t.style.backgroundImage="url('https://i.ibb.co/r76r6Vt/oie-30214851-Ms-Wl-PTS0.png')",n.innerText=e.title?`${e.title}`:"N/A",about.innerText=e.overview?`${e.overview}`:"N/A",r.className="average",o.className="count",r.innerText=e.vote_average?`${(1*e.vote_average).toFixed(1)}`:"N/A",o.innerText=e.vote_count?`/ ${e.vote_count}`:"N/A",s.append(r,o),i.innerText=e.popularity?`${(1*e.popularity).toFixed(1)}`:"N/A",c.innerText=e.original_title?`${e.original_title}`:"N/A",l.innerText=e.genre_ids?`${e.genre_ids}`:"N/A"}})),r("kyEFX").register(JSON.parse('{"eM9ss":"library.426f0107.js","lp5u4":"sprite.a7e02cf8.svg"}'));
//# sourceMappingURL=library.426f0107.js.map
